<UserControl x:Class="Agent.View.HomePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Agent.View"
             xmlns:fa="http://schemas.fontawesome.io/icons/"
             xmlns:viewModel="clr-namespace:Core.ViewModel;assembly=Core"
             mc:Ignorable="d" FontFamily="/Agent;component/Resources/Fonts/#Roboto"
             d:DesignHeight="540" d:DesignWidth="930">
    <UserControl.Resources>
        <viewModel:TimeNowViewModel x:Key="TimeVM" />
    </UserControl.Resources>

    <Grid x:Name="grid">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <!-- Верхняя сетка -->
                <DockPanel Grid.Column="0" Opacity=".930">
                    <Border Style="{StaticResource BoxPanel}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Foreground="{DynamicResource TextColor}" Text="Тревоги" FontSize="17"
                                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5" />
                            <Border Grid.Row="0" BorderBrush="{DynamicResource AlertLineColor}"
                                    BorderThickness="0,0,0,2" />

                            <ListBox Grid.Row="1" ScrollViewer.CanContentScroll="False"
                                     ItemsSource="{Binding Alerts}" Background="{x:Null}" BorderBrush="{x:Null}"
                                     VerticalContentAlignment="Top"
                                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                                     ItemContainerStyle="{StaticResource AlertListItem}">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid MaxHeight="33" Margin="0,1,0,2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="3*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" Margin="4,0,0,0"
                                                    BorderBrush="{Binding StatusColor}"
                                                    BorderThickness="0,0,1,0" Padding="0,0,3,0">
                                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center"
                                                            Margin="0,0,2,0">
                                                    <TextBlock Foreground="{DynamicResource TextColor}" FontSize="10"
                                                               TextTrimming="CharacterEllipsis"
                                                               FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                               HorizontalAlignment="Center"
                                                               Text="{Binding MissionInfo.MinEnemyLevel, StringFormat={}{0:00}}" />
                                                    <TextBlock Foreground="{DynamicResource TextColor}" FontSize="10"
                                                               TextTrimming="CharacterEllipsis"
                                                               FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                               HorizontalAlignment="Center" Margin="0,1,0,0"
                                                               Text="{Binding MissionInfo.MaxEnemyLevel, StringFormat={}{0:00}}" />
                                                </StackPanel>
                                            </Border>
                                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,0,2">
                                                <TextBlock Margin="3,2,3,0" FontWeight="Medium"
                                                           Foreground="{DynamicResource TextColor}" FontSize="11"
                                                           TextTrimming="CharacterEllipsis"
                                                           FontFamily="/Agent;component/Resources/Fonts/#Roboto">
                                                    <Run Text="{Binding MissionInfo.Planet[0]}"
                                                         ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding MissionInfo.Planet[1]}"
                                                         ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}" />
                                                </TextBlock>
                                                <TextBlock Margin="3,2,3,0" Foreground="{DynamicResource TextColor}"
                                                           FontSize="11"
                                                           TextTrimming="CharacterEllipsis"
                                                           FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                           VerticalAlignment="Center">
                                                    <Run Text="{Binding MissionInfo.Faction, Mode=OneWay}"
                                                         ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}" />
                                                    <fa:FontAwesome Foreground="{DynamicResource TextColor}"
                                                                    Icon="AngleDoubleRight" Margin="0" FontSize="11"
                                                                    VerticalAlignment="Center" />
                                                    <Run Text="{Binding MissionInfo.MissionType, Mode=OneWay}"
                                                         ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}" />
                                                </TextBlock>
                                            </StackPanel>

                                            <DockPanel Grid.Column="2" Margin="0,0,0,2" HorizontalAlignment="Right">
                                                <StackPanel Margin="0,2,0,0" DockPanel.Dock="Top"
                                                            Orientation="Horizontal" HorizontalAlignment="Right">
                                                    <TextBlock
                                                        Foreground="{DynamicResource TextColor}" FontSize="11"
                                                        TextTrimming="CharacterEllipsis" Text="{Binding Status}"
                                                        FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                        VerticalAlignment="Top" />
                                                </StackPanel>
                                                <StackPanel Margin="0,0,0,2" DockPanel.Dock="Bottom"
                                                            Orientation="Horizontal" HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom">
                                                    <fa:FontAwesome
                                                        Visibility="{Binding MissionInfo.ArchvingVisibility}"
                                                        Foreground="{DynamicResource TextColor}" Icon="SunOutline"
                                                        ToolTip="Арчвинг миссия"
                                                        FontSize="10" Margin="0" />
                                                    <fa:FontAwesome
                                                        Visibility="{Binding MissionInfo.SharkwingVisibility}"
                                                        ToolTip="Шарквинг миссия"
                                                        Foreground="{DynamicResource TextColor}"
                                                        Icon="SnowflakeOutline" FontSize="10" Margin="2,0,1,0" />
                                                    <fa:FontAwesome Visibility="{Binding MissionInfo.RewardVisibility}"
                                                                    ToolTip="{Binding MissionInfo.Reward}"
                                                                    Foreground="{Binding MissionInfo.RewardColor, TargetNullValue={StaticResource TextColor}}"
                                                                    Icon="Diamond" FontSize="10" Margin="2,0,1,0" />
                                                    <fa:FontAwesome Visibility="{Binding MissionInfo.CreditVisibility}"
                                                                    ToolTip="{Binding MissionInfo.MissionReward.Credits}"
                                                                    Foreground="{DynamicResource TextColor}"
                                                                    Icon="CreditCard" FontSize="10" Margin="2,0,0,-1" />
                                                </StackPanel>

                                            </DockPanel>
                                            <ProgressBar Name="Bar" Foreground="{DynamicResource AlertLineColor}"
                                                         BorderThickness="0"
                                                         Minimum="{Binding Activation.Ticks}"
                                                         Maximum="{Binding Expiry.Ticks}"
                                                         Value="{Binding Now.Ticks, Source={StaticResource TimeVM}, Mode=OneWay}"
                                                         Background="{DynamicResource AlertProgressColor}"
                                                         BorderBrush="{x:Null}" VerticalAlignment="Bottom" Height="1"
                                                         Margin="0,0,-4,-3" Grid.ColumnSpan="3"
                                                         Grid.Column="0" />
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="5,2,0,5"
                                        HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Foreground="{DynamicResource TextColor}" Text="Активных: " />
                                <TextBlock Foreground="{DynamicResource TextColor}" Text="{Binding Alerts.Count}" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>
                <DockPanel Grid.Column="1" Opacity=".930">
                    <Border Style="{StaticResource BoxPanel}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Foreground="{DynamicResource TextColor}" Text="Вторжения" FontSize="17"
                                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5" />
                            <Border Grid.Row="0" BorderBrush="{DynamicResource InvasionsLineColor}"
                                    BorderThickness="0,0,0,2" />

                            <Grid Grid.Row="1">
                                <Grid.Resources>

                                    <CollectionViewSource x:Key="GroupedInvasions" Source="{Binding Invasions}">
                                        <CollectionViewSource.GroupDescriptions>
                                            <PropertyGroupDescription PropertyName="NodeArray[0]" />
                                        </CollectionViewSource.GroupDescriptions>
                                    </CollectionViewSource>

                                </Grid.Resources>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <ListBox Grid.Row="0" ScrollViewer.CanContentScroll="False"
                                         ItemsSource="{Binding Source={StaticResource GroupedInvasions}}"
                                         Background="{x:Null}" BorderBrush="{x:Null}"
                                         VerticalContentAlignment="Top"
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                                         ItemContainerStyle="{StaticResource AlertListItem}">
                                    <ListBox.GroupStyle>
                                        <GroupStyle>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Margin="3,5,3,0" FontWeight="Medium"
                                                               Foreground="{DynamicResource TextColor}" FontSize="11"
                                                               TextTrimming="CharacterEllipsis"
                                                               FontFamily="/Agent;component/Resources/Fonts/#Roboto">
                                                        <fa:FontAwesome Icon="Globe" />
                                                        <Run Text="{Binding Name, Mode=OneWay}" />
                                                    </TextBlock>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </ListBox.GroupStyle>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Height="33" Margin="0,1,0,2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>


                                                <Grid Grid.Column="1">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>

                                                    <Grid VerticalAlignment="Top">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel Grid.Column="0"
                                                                    Background="{Binding AttackerColor}" Width="35"
                                                                    HorizontalAlignment="Left" VerticalAlignment="Top">
                                                            <TextBlock Foreground="White" FontSize="10"
                                                                       TextTrimming="CharacterEllipsis"
                                                                       FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                                       Text="{Binding Percent, StringFormat='\{0:n2\}'}"
                                                                       VerticalAlignment="Center"
                                                                       HorizontalAlignment="Center" Padding="1,1" />
                                                        </StackPanel>

                                                        <TextBlock FontWeight="Medium" Grid.Column="1"
                                                                   Foreground="{DynamicResource TextColor}"
                                                                   FontSize="11"
                                                                   TextTrimming="CharacterEllipsis"
                                                                   FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                                   Margin="0"
                                                                   Text="{Binding NodeArray[1]}"
                                                                   ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}"
                                                                   Padding="5,2,5,2" VerticalAlignment="Center"
                                                                   TextAlignment="Center" />

                                                        <StackPanel Grid.Column="2"
                                                                    Background="{Binding DefenderColor}" Width="35"
                                                                    HorizontalAlignment="Right" VerticalAlignment="Top">
                                                            <TextBlock Foreground="White" FontSize="10"
                                                                       TextTrimming="CharacterEllipsis"
                                                                       FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                                       Text="{Binding PercentOut, StringFormat='\{0:n2\}'}"
                                                                       VerticalAlignment="Center"
                                                                       HorizontalAlignment="Center" Padding="1,1" />
                                                        </StackPanel>

                                                    </Grid>

                                                    <Grid VerticalAlignment="Bottom" Grid.Row="1">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>


                                                        <TextBlock Grid.Column="0"
                                                                   Foreground="{DynamicResource TextColor}"
                                                                   FontSize="11"
                                                                   TextTrimming="CharacterEllipsis"
                                                                   ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}"
                                                                   FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                                   Text="{Binding AttackerReward}"
                                                                   VerticalAlignment="Center"
                                                                   HorizontalAlignment="Left" Margin="2,0,2,3" />

                                                        <TextBlock Grid.Column="1"
                                                                   Foreground="{DynamicResource TextColor}"
                                                                   FontSize="11"
                                                                   TextTrimming="CharacterEllipsis"
                                                                   ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}"
                                                                   FontFamily="/Agent;component/Resources/Fonts/#Roboto"
                                                                   Text="{Binding DefenderReward}"
                                                                   VerticalAlignment="Center"
                                                                   HorizontalAlignment="Right" Margin="2,0,2,3" />
                                                    </Grid>
                                                </Grid>


                                                <Border BorderBrush="{Binding AttackerColor}" BorderThickness="0,0,1,0"
                                                        Grid.Column="0" Width="30" Margin="3,0,0,3">
                                                    <Path MaxHeight="20" MaxWidth="20"
                                                          ToolTip="{Binding AttackerFaction}"
                                                          Fill="{Binding AttackerColor}" HorizontalAlignment="Stretch"
                                                          VerticalAlignment="Stretch" StrokeThickness="0"
                                                          Stretch="UniformToFill" SnapsToDevicePixels="True"
                                                          Data="M 49.780788,121.92693 C 29.049687,116.90845 10.93327,98.610626 6.0079186,77.715756 -4.0748523,34.941502 34.960621,-4.0939709 77.734874,5.9888017 98.887751,10.97497 117.00944,29.096669 121.99561,50.249544 132.11168,93.165049 92.673119,132.3101 49.780788,121.92693 Z m 23.342753,-7.98607 c 9.895645,-1.80746 19.273785,-6.83065 26.81654,-14.363701 3.660379,-3.655667 6.655239,-7.170213 6.655239,-7.810102 0,-0.821964 -12.501327,-1.163436 -42.593552,-1.163436 -30.092224,0 -42.593553,0.341472 -42.593553,1.163436 0,0.639889 2.994859,4.154435 6.655242,7.810102 12.405699,12.389731 28.237438,17.436371 45.060084,14.363701 z M 41.035497,49.768025 C 52.574782,29.943924 61.825178,13.533365 61.59193,13.300119 c -0.233247,-0.233248 -3.260489,0.09397 -6.727205,0.727153 -26.416307,4.824834 -45.3994184,31.222168 -41.093263,57.14304 1.354284,8.152103 4.423627,16.728617 5.538908,15.477097 0.409533,-0.45956 10.18584,-17.055283 21.725127,-36.879384 z M 75.018466,82.884268 C 92.142259,73.430517 88.341788,47.806303 69.045205,42.610273 54.745252,38.759696 39.683996,52.447402 42.151339,67.051484 44.783838,82.63311 61.172997,90.528112 75.018466,82.884268 Z M 112.27475,79.866793 C 121.8617,51.13641 103.05099,19.490613 73.138811,14.027272 69.672096,13.39409 66.645939,13.065786 66.414017,13.297707 c -0.231921,0.231922 9.26558,16.785703 21.105558,36.786181 11.839976,20.000477 21.887105,35.981693 22.326975,35.513812 0.43985,-0.467881 1.53254,-3.046789 2.4282,-5.730907 z" />
                                                </Border>
                                                <Border BorderBrush="{Binding DefenderColor}" BorderThickness="1,0,0,0"
                                                        Grid.Column="2" Width="30" Margin="0,0,3,3">
                                                    <Path MaxHeight="20" MaxWidth="20"
                                                          ToolTip="{Binding DefenderFaction}"
                                                          Fill="{Binding DefenderColor}" HorizontalAlignment="Stretch"
                                                          VerticalAlignment="Stretch" StrokeThickness="0"
                                                          Stretch="UniformToFill" SnapsToDevicePixels="True"
                                                          Data="m 40.353781,113.94458 c -4.95,-0.49549 -14.86155,-0.77218 -22.025661,-0.61485 l -13.0256615,0.28605 4.190444,-7 c 2.3047425,-3.85 7.2368515,-14.200003 10.9602405,-23.000003 3.723388,-8.8 6.886428,-16.162195 7.028978,-16.360432 0.34149,-0.474883 14.37166,5.037183 14.37166,5.646227 0,0.258402 -1.69996,0.197987 -3.77769,-0.134256 l -3.77769,-0.604077 -3.22231,11.888706 c -1.77227,6.538789 -3.22231,12.382706 -3.22231,12.986484 0,0.603777 2.38611,-0.48651 5.30246,-2.42286 4.94896,-3.285921 8.91735,-7.74581 14.85723,-16.697346 l 2.45356,-3.697554 1.19774,4.478238 c 0.801051,2.99505 2.67798,5.958471 5.66706,8.947554 l 4.46932,4.469316 h -3.01584 c -5.71542,0 -18.32247,3.165675 -23.870399,5.99394 -6.35107,3.237703 -6.61268,3.039493 7.93887,6.015053 14.32765,2.92978 13.39365,2.99657 14.11042,-1.00899 0.44162,-2.46796 0.665109,-1.21476 0.757939,4.25 l 0.13164,7.75 -4.25,-0.13515 c -2.3375,-0.0743 -8.3,-0.54055 -13.25,-1.03605 z m 29.616,-6.0788 c 0.0638,-3.9875 0.31515,-6.35 0.55855,-5.25 0.2434,1.1 0.60714,2.51053 0.8083,3.13451 0.253691,0.78694 4.14187,0.2561 12.69145,-1.73272 6.77913,-1.57697 12.7757,-2.89665 13.3257,-2.93261 0.55,-0.036 -1.64245,-1.428737 -4.87211,-3.09506 -6.18873,-3.193033 -16.52173,-5.827619 -22.97056,-5.856759 l -3.84267,-0.01736 4.59933,-5.115563 c 3.248,-3.61255 4.78973,-6.306241 5.24736,-9.168083 0.742901,-4.645867 0.16537,-5.076732 8.19864,6.116544 4.05824,5.654601 14.4343,14.206149 15.70061,12.939837 0.46937,-0.469375 -0.65248,-4.835002 -6.12152,-23.821523 -0.33053,-1.147466 -1.41692,-1.44027 -4.19261,-1.129994 -2.060559,0.230337 -3.52147,0.184777 -3.24647,-0.101244 0.71628,-0.744987 13.28242,-5.770883 13.60994,-5.443368 0.15031,0.150309 2.485729,5.437062 5.189829,11.748341 6.04741,14.114441 11.5707,25.173276 15.25391,30.541686 l 2.79008,4.06664 -8.17188,-0.41073 c -4.49453,-0.22589 -15.956119,0.30662 -25.470198,1.18337 -9.514081,0.87675 -17.726581,1.59409 -18.250001,1.59409 -0.5254,0 -0.89972,-3.24748 -0.83568,-7.25 z M 59.261751,84.586871 c -3.05239,-3.236472 -5.44418,-9.768219 -4.07741,-11.134992 1.01401,-1.014008 9.44105,-1.60153 13.10697,-0.9138 2.90295,0.544598 3.56247,1.110707 3.56247,3.057911 0,1.314273 -0.40011,3.431383 -0.889129,4.704687 -1.11909,2.913851 -5.631471,7.8151 -7.195041,7.8151 -0.64882,0 -2.67736,-1.588008 -4.50786,-3.528906 z m -3.07757,-21.136137 c 4.56816,-9.073579 5.88329,-13.81809 5.49341,-19.818281 l -0.32381,-4.983324 -10.30502,9.378954 -10.30501,9.378955 3.30501,3.504546 c 1.81776,1.927501 2.63002,3.137958 1.80502,2.689905 -2.49734,-1.356293 -13,-8.748772 -13,-9.150278 0,-0.206131 4.32628,-5.428431 9.61396,-11.605109 10.33741,-12.075417 17.64377,-21.851529 20.46104,-27.37744 1.55581,-3.051632 1.832611,-3.219344 2.394001,-1.450545 1.05956,3.338361 9.67847,15.934562 19.36443,28.300345 5.041619,6.436477 9.166569,11.93221 9.166569,12.212739 0,0.28053 -2.7,2.343589 -6,4.584576 -6.09392,4.1383 -7.60232,4.334495 -4.0217,0.523095 l 1.97831,-2.105808 -9.44645,-9.407168 c -5.195539,-5.173942 -9.75649,-9.097121 -10.13544,-8.718176 -1.54731,1.547317 1.67408,17.113174 4.94452,23.892079 l 3.32758,6.897317 -3.07341,-0.790669 c -4.0327,-1.037458 -13.46242,-1.011961 -16.37877,0.04429 -2.22258,0.804979 -2.18181,0.589564 1.13576,-6 z" />
                                                </Border>
                                                <ProgressBar Grid.Column="0" Grid.ColumnSpan="3"
                                                             Foreground="{Binding AttackerColor}"
                                                             BorderThickness="0"
                                                             Value="{Binding Path=Percent, Mode=OneWay}"
                                                             Background="{Binding DefenderColor}"
                                                             BorderBrush="{x:Null}" Height="1"
                                                             VerticalAlignment="Bottom" />

                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <ListBox Grid.Row="1" ItemsSource="{Binding ProjectPct}"
                                         ScrollViewer.CanContentScroll="False" Background="{x:Null}"
                                         BorderBrush="{x:Null}" VerticalContentAlignment="Top"
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                                         ItemContainerStyle="{StaticResource AlertListItem}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Background="Red" MaxHeight="33">
                                                <ProgressBar Name="Bar"
                                                             Foreground="{Binding Color}"
                                                             BorderThickness="0"
                                                             Minimum="0"
                                                             Maximum="100"
                                                             Value="{Binding Value}"
                                                             Background="{x:Null}"
                                                             BorderBrush="{x:Null}" Margin="0,0,-3,0" />
                                                <DockPanel>
                                                    <TextBlock DockPanel.Dock="Left" HorizontalAlignment="Left"
                                                               VerticalAlignment="Center" Text="{Binding Name}" />
                                                    <TextBlock Text="{Binding StringFormat={}{0:0.00}%, Path=Value}"
                                                               DockPanel.Dock="Right" HorizontalAlignment="Right"
                                                               VerticalAlignment="Center" />
                                                </DockPanel>
                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </Grid>
                    </Border>
                </DockPanel>
                <DockPanel Grid.Column="2" Opacity=".930" DataContext="{Binding GameView}">
                    <Border Style="{StaticResource BoxPanel}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Foreground="{DynamicResource TextColor}" Text="Торговцы" FontSize="17"
                                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5" />
                            <Border Grid.Row="0" BorderBrush="{DynamicResource TradeLineColor}"
                                    BorderThickness="0,0,0,2" />

                            <!-- Контент -->
                        </Grid>
                    </Border>
                </DockPanel>
            </Grid>

            <Grid Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <!-- Нижняя сетка -->
                <DockPanel x:Name="NewsPanel" Opacity=".930" DataContext="{Binding NewsData}">
                    <Border Style="{StaticResource BoxPanel}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Foreground="{DynamicResource TextColor}" Text="Новости" FontSize="17"
                                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5" />
                            <Border Grid.Row="0" BorderBrush="{DynamicResource NewsLineColor}"
                                    BorderThickness="0,0,0,2" />

                            <ListBox Grid.Row="1" ScrollViewer.CanContentScroll="False"
                                     ItemsSource="{Binding Data.Posts}" Background="{x:Null}" BorderBrush="{x:Null}"
                                     VerticalContentAlignment="Top"
                                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                     ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderThickness="0,0,0,1" BorderBrush="{DynamicResource NewsLineColor}"
                                                Margin="0,0,0,-1">
                                            <Grid MaxHeight="33">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Image Grid.Column="0" Stretch="UniformToFill" Margin="0">
                                                    <Image.Source>
                                                        <BitmapImage UriCachePolicy="Revalidate"
                                                                     UriSource="{Binding Image}" />
                                                    </Image.Source>
                                                </Image>
                                                <Grid Grid.Column="1">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock Foreground="{DynamicResource TextColor}" Grid.Row="0"
                                                               FontSize="11" TextTrimming="CharacterEllipsis"
                                                               FontWeight="Medium" Text="{Binding Title}"
                                                               ToolTip="{Binding Title}" Margin="5,2,3,0" />
                                                    <DockPanel Grid.Row="1" Margin="5,0,5,2" HorizontalAlignment="Left">
                                                        <fa:FontAwesome Foreground="{DynamicResource TextColor}"
                                                                        Icon="Bars" Margin="0,0,2,0" FontSize="11" />
                                                        <TextBlock Foreground="{DynamicResource TextColor}"
                                                                   FontSize="11"
                                                                   TextTrimming="CharacterEllipsis"
                                                                   Text="{Binding Description}"
                                                                   ToolTip="{Binding Description}"
                                                                   FontFamily="/Agent;component/Resources/Fonts/#Roboto" />
                                                    </DockPanel>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>

                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource NewsListItem}">
                                        <EventSetter Event="MouseDoubleClick" Handler="EventSetter_OnHandler" />
                                    </Style>
                                </ListBox.ItemContainerStyle>
                            </ListBox>
                        </Grid>
                    </Border>
                </DockPanel>

                <DockPanel Grid.Column="1" Opacity=".930" DataContext="{Binding GameView}">
                    <Border Style="{StaticResource BoxPanel}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Foreground="{DynamicResource TextColor}" Text="Вылазки" FontSize="17"
                                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5" />
                            <Border Grid.Row="0" BorderBrush="{DynamicResource SortiesLineColor}"
                                    BorderThickness="0,0,0,2" />

                            <!-- Контент -->
                        </Grid>
                    </Border>
                </DockPanel>
            </Grid>
        </Grid>
    </Grid>

</UserControl>